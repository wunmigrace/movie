<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movies</title>
    <link rel="stylesheet" href="../css/app.css">
</head>
<body>
    <div class="min-h-screen w-full bg-slate-950 bg-opacity-85v text-white">
        <!-- Header -->
        <header>
            <div class="max-w-6xl mx-auto flex items-center justify-between">
                <aside>
                    <h1 class="text-2xl font-bold py-2">
                        <span class="text-orange-400">MOVIES</span> List
                    </h1>
                </aside>

                <aside>
                    <a href="movies.html" class="py-2 inline-block">
                        All Movies
                    </a>
                </aside>
            </div>
        </header>

        <!-- Movies List Section -->
        <div class="py-7"></div>
        <div>
            <section class="max-w-6xl mx-auto">
                <div class="grid grid-cols-5 gap-4 justify-center" id="movie_list">
                    <div class="col-span-5 flex justify-center items-center h-96">
                        <img src="../img/loading.gif" alt="" class="h-24">
                    </div>
                    <!-- <a href="" class="bg-slate-700 block">
                        <div class="h-56 bg-slate-800">
                            <img src="../img/dummy.jpg" alt=" " class="h-full">
                        </div>
                        <aside class="py-2 px-3">
                            <h2 class="font-semibold text-xl">Title</h2>
                            <p class="text-sm">
                                Release Date
                            </p>
                        </aside>
                    </a> -->
                </div>
            </section>
        </div>
    </div>
    <script src="../js/app.js"></script>
    <script>
        window.addEventListener("DOMContentLoaded", function() {
            async function fetchMovies() {
                await fetch('./../../api/movies/fetch_all.php')
                .then((res) => res.json())
                .then((data) => {
                    console.log(data);
                    let list = '';
                    data.forEach(movie => {
                        list += `<a href="movie_details.html?el_id=${movie.el_id}" class="bg-slate-700 block">
                                    <div class="h-56 bg-slate-800">
                                        <img src="../img/dummy.jpg" alt=" " class="h-full">
                                    </div>
                                    <aside class="py-2 px-3">
                                        <h2 class="font-semibold text-lg">${movie.title}</h2>
                                        <p class="text-xs">
                                            Release Date: ${movie.released}
                                        </p>
                                    </aside>
                                </a>`;
                    });
                    document.getElementById('movie_list').innerHTML = list;
                })
            }
            fetchMovies();
        });
    </script>
</body>
</html>